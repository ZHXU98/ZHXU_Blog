
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<body>
<h2>【stl内的二分】Stairs_and_Elevators_CodeForces_-_967C</h2>
<div class="blogpost-body" id="cnblogs_post_body">
<!-- flowchart 箭头图标 勿删 -->
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p>题意：n*m的楼房，cl个楼梯，ce个电梯，除了电梯的最大速度是v外，其他速度都是1。给出q次询问，回答(x1, y1)到(x2, y2)，最少需要多少时间？ <br/>
顺序输入（有小到大）；</p>
<p>简短的。。。。。</p>
<pre class="prettyprint"><code class="hljs cpp"><span class="hljs-preprocessor">#include &lt;iostream&gt;</span>
<span class="hljs-preprocessor">#include &lt;cstdio&gt;</span>
<span class="hljs-preprocessor">#include &lt;cmath&gt;</span>
<span class="hljs-preprocessor">#include &lt;algorithm&gt;</span>
<span class="hljs-preprocessor">#include &lt;vector&gt;</span>
<span class="hljs-preprocessor">#include &lt;queue&gt;</span>
<span class="hljs-preprocessor">#include &lt;cstring&gt;</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxn = <span class="hljs-number">1e5</span>+<span class="hljs-number">5</span>;
<span class="hljs-keyword">int</span> l[maxn];
<span class="hljs-keyword">int</span> e[maxn];


<span class="hljs-keyword">int</span> main(){
<span class="hljs-keyword">int</span> n,m,ce,cl,q,x1,x2,yy1,yy2,v,ans;
    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;cl&gt;&gt;ce&gt;&gt;v){

        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;cl;i++) <span class="hljs-built_in">cin</span>&gt;&gt;l[i];
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;ce;i++) <span class="hljs-built_in">cin</span>&gt;&gt;e[i];

        <span class="hljs-built_in">cin</span>&gt;&gt;q;
        <span class="hljs-keyword">while</span>(q--){
            ans=<span class="hljs-number">0x3f3f3f3f</span>;
            <span class="hljs-built_in">cin</span>&gt;&gt;yy1&gt;&gt;x1&gt;&gt;yy2&gt;&gt;x2;

            <span class="hljs-keyword">if</span>(yy1==yy2){<span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-built_in">abs</span>(x1-x2)&lt;&lt;endl;<span class="hljs-keyword">continue</span>;}

            <span class="hljs-keyword">int</span> lt=lower_bound(l,l+cl,x1)-l;
            <span class="hljs-keyword">int</span> dt=lower_bound(e,e+ce,x1)-e;

            <span class="hljs-keyword">if</span>(lt&lt;cl) ans=min(ans,<span class="hljs-built_in">abs</span>(l[lt]-x1)+<span class="hljs-built_in">abs</span>(l[lt]-x2)+<span class="hljs-built_in">abs</span>(yy2-yy1));
            <span class="hljs-keyword">if</span>(lt&gt;<span class="hljs-number">0</span>) ans=min(ans,<span class="hljs-built_in">abs</span>(l[lt-<span class="hljs-number">1</span>]-x1)+<span class="hljs-built_in">abs</span>(l[lt-<span class="hljs-number">1</span>]-x2)+<span class="hljs-built_in">abs</span>(yy2-yy1));

            <span class="hljs-keyword">int</span> sx=(<span class="hljs-built_in">abs</span>(yy1-yy2)+v-<span class="hljs-number">1</span>)/v;

            <span class="hljs-keyword">if</span>(dt&lt;ce) ans=min(ans,(<span class="hljs-keyword">int</span>)(<span class="hljs-built_in">abs</span>(e[dt]-x1)+<span class="hljs-built_in">abs</span>(e[dt]-x2)+sx));
            <span class="hljs-keyword">if</span>(dt&gt;<span class="hljs-number">0</span>)  ans=min(ans,(<span class="hljs-keyword">int</span>)(<span class="hljs-built_in">abs</span>(e[dt-<span class="hljs-number">1</span>]-x1)+<span class="hljs-built_in">abs</span>(e[dt-<span class="hljs-number">1</span>]-x2)+sx));

            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,ans);
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>我最开始写的 orz（脑子抽了写这干什么）。。。。。</p>
<pre class="prettyprint"><code class="hljs cpp"><span class="hljs-preprocessor">#include &lt;iostream&gt;</span>
<span class="hljs-preprocessor">#include &lt;cstdio&gt;</span>
<span class="hljs-preprocessor">#include &lt;cstring&gt;</span>
<span class="hljs-preprocessor">#include &lt;algorithm&gt;</span>
<span class="hljs-preprocessor">#include &lt;cmath&gt;</span>
<span class="hljs-preprocessor">#include &lt;vector&gt;</span>
<span class="hljs-preprocessor">#include &lt;map&gt;</span>
<span class="hljs-preprocessor">#include &lt;string&gt;</span>
<span class="hljs-preprocessor">#include &lt;queue&gt;</span>
<span class="hljs-preprocessor">#include &lt;stack&gt;</span>
<span class="hljs-preprocessor">#include &lt;set&gt;</span>
<span class="hljs-preprocessor">#include &lt;list&gt;</span>
<span class="hljs-preprocessor">#include &lt;bitset&gt;</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;

<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> INF=<span class="hljs-number">0x3f3f3f3f</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxn=<span class="hljs-number">1e5</span>+<span class="hljs-number">5</span>;
<span class="hljs-keyword">int</span> dianti[maxn];
<span class="hljs-keyword">int</span> louti[maxn];
<span class="hljs-keyword">int</span> n,m,c1,c2,v,q;

<span class="hljs-keyword">int</span> main(){
    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;c1&gt;&gt;c2&gt;&gt;v){
    <span class="hljs-comment">//  memset(dianti)</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;c1;i++) <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;louti[i]);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;c2;i++) <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;dianti[i]);
        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;q);
        <span class="hljs-keyword">int</span> x1,x2,y1,y2;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;q;i++){
            <span class="hljs-built_in">cin</span>&gt;&gt;y1&gt;&gt;x1&gt;&gt;y2&gt;&gt;x2;
            <span class="hljs-keyword">if</span>(y1==y2){<span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-built_in">abs</span>(x2-x1)&lt;&lt;endl;<span class="hljs-keyword">continue</span>;}
            <span class="hljs-keyword">int</span> ans1=INF,ans2=INF;
            <span class="hljs-keyword">if</span>(c1!=<span class="hljs-number">0</span>){
                <span class="hljs-keyword">int</span> louti_r_pos=upper_bound(louti,louti+c1,x1)-louti;
                <span class="hljs-keyword">int</span> louti_l_pos=-<span class="hljs-number">1</span>;

                <span class="hljs-keyword">int</span> louti_r;
                <span class="hljs-keyword">if</span>(louti_r_pos==c1){
                    louti_r=louti[louti_r_pos-<span class="hljs-number">1</span>];
                    louti_r_pos--;
                }
                <span class="hljs-keyword">else</span>{
                    louti_r=louti[louti_r_pos];
                }
                <span class="hljs-keyword">if</span>(louti_r_pos-<span class="hljs-number">1</span>&gt;=<span class="hljs-number">0</span>) louti_l_pos=louti_r_pos-<span class="hljs-number">1</span>;
                <span class="hljs-keyword">int</span> louti_l=-<span class="hljs-number">1</span>;
                <span class="hljs-keyword">if</span>(louti_l_pos&gt;=<span class="hljs-number">0</span>) louti_l=louti[louti_l_pos];

                <span class="hljs-keyword">int</span> louti_y_time=<span class="hljs-built_in">abs</span>((y2-y1));

                <span class="hljs-keyword">int</span> louti_rx_time=<span class="hljs-built_in">abs</span>(x1-louti_r);
                <span class="hljs-keyword">int</span> louti_lx_time=louti_l!=-<span class="hljs-number">1</span>?<span class="hljs-built_in">abs</span>(x1-louti_l):INF;

                <span class="hljs-keyword">int</span> louti_r_tsum=louti_y_time+louti_rx_time+<span class="hljs-built_in">abs</span>(x2-louti_r);
                <span class="hljs-keyword">int</span> louti_l_tsum=louti_y_time+louti_lx_time+<span class="hljs-built_in">abs</span>(x2-louti_l);

                ans1=min(louti_r_tsum,louti_l_tsum);
            <span class="hljs-comment">//  cout&lt;&lt;"    "&lt;&lt;ans1&lt;&lt;endl;</span>
            }
            <span class="hljs-keyword">if</span>(c2!=<span class="hljs-number">0</span>){
                <span class="hljs-keyword">int</span> dianti_r_pos=upper_bound(dianti,dianti+c2,x1)-dianti;

                <span class="hljs-keyword">int</span> dianti_l_pos=-<span class="hljs-number">1</span>;

                <span class="hljs-keyword">int</span> dianti_r;
                <span class="hljs-keyword">if</span>(dianti_r_pos==c2){
                    dianti_r=dianti[dianti_r_pos-<span class="hljs-number">1</span>];
                    dianti_r_pos--;
                }
                <span class="hljs-keyword">else</span>{
                    dianti_r=dianti[dianti_r_pos];
                }

                <span class="hljs-keyword">if</span>(dianti_r_pos-<span class="hljs-number">1</span>&gt;=<span class="hljs-number">0</span>) dianti_l_pos=dianti_r_pos-<span class="hljs-number">1</span>;
                <span class="hljs-keyword">int</span> dianti_l=-<span class="hljs-number">1</span>;    
                <span class="hljs-keyword">if</span>(dianti_l_pos&gt;=<span class="hljs-number">0</span>) dianti_l=dianti[dianti_l_pos];  

                <span class="hljs-keyword">int</span> dianti_rx_time=<span class="hljs-built_in">abs</span>(x1-dianti_r);
                <span class="hljs-keyword">int</span> dianti_lx_time=dianti_l_pos!=-<span class="hljs-number">1</span>?<span class="hljs-built_in">abs</span>(x1-dianti_l):INF;

                <span class="hljs-keyword">int</span> dianti_y_time=<span class="hljs-built_in">ceil</span>(<span class="hljs-built_in">abs</span>(<span class="hljs-number">1.0</span>*y1-<span class="hljs-number">1.0</span>*y2)/v);

                <span class="hljs-keyword">int</span> dianti_r_tsum=dianti_rx_time+dianti_y_time+<span class="hljs-built_in">abs</span>(x2-dianti_r);
                <span class="hljs-keyword">int</span> dianti_l_tsum=dianti_lx_time+dianti_y_time+<span class="hljs-built_in">abs</span>(x2-dianti_l);

                ans2=min(dianti_r_tsum,dianti_l_tsum);
            <span class="hljs-comment">//  cout&lt;&lt;"     "&lt;&lt;ans2&lt;&lt;endl;</span>
            }           
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,(min(ans1,ans2)));
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
</div>
</body>
</html>
